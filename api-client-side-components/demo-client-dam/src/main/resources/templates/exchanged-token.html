<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Webapp client DAM</title>
<script src="./script/jquery-3.5.1.min.js"></script>
<script src="./script/json-viewer.js"></script>
<link rel="stylesheet" href="./style/json-viewer.css" type="text/css">
<script src="./script/jsonviewer-token.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/webjars/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="./style/style.css">
    <link rel="stylesheet" href="https://use.typekit.net/jjx2ksb.css">
    <link rel="stylesheet" href="./style/style-ans.css" type="text/css">
    <link rel="icon" type="image/x-icon" href="./img/favicon.ico">
</head>
<body>
	<div body-wrapper> 
	<header class="header header-principal" role="banner">
        <div class="header-principal__inner">
            <div class="header-principal-left">
                <div class="logos">
                    <div class="logo logo--0">
                        <a href="https://solidarites-sante.gouv.fr/">

                            <img src="./img/logo-ministere.svg" alt="Ministère de la Santé et de la Prévention"
                                 width="107" height="62">

                        </a>
                    </div>
                    <div class="logo logo--1">
                        <a href="/">

                            <img src="./img/logo-ANS.svg" alt="Accueil Design System ANS" width="166" height="50">

                        </a>
                    </div>
                </div>
                <p class="header__title">Application 1</p>
            </div>
            <div class="header-principal-right">
                <div class="header-principal__nav">


                    <div class="navbar navbar-expand-xl navbar-light" tabindex="-1" id="menuPrincipalTarget">
                        <button type="button" class="navbar-toggler btn btn--icon-only btn-icon--header"
                                data-toggle="collapse" data-target="#menuPrincipal" aria-controls="menuPrincipal"
                                aria-expanded="false">
                            <svg class="svg-icon svg-menu" aria-hidden="true" focusable="false">
                                <use xlink:href="/svg-icons/icon-sprite.svg#menu"></use>
                            </svg>
                            <span class="sr-only">Menu</span>
                        </button>


                        <div class="collapse navbar-collapse" id="menuPrincipal">
                            <button type="button"
                                    class="navbar-toggler-close d-xl-none btn btn--icon-only btn-icon--header"
                                    data-toggle="collapse" data-target="#menuPrincipal" aria-controls="menuPrincipal"
                                    aria-expanded="false">
                                <svg class="svg-icon svg-close" aria-hidden="true" focusable="false">
                                    <use xlink:href="/svg-icons/icon-sprite.svg#close"></use>
                                </svg>
                                <span class="sr-only">Fermer le menu</span>
                            </button>


                            <nav role="navigation" aria-label="Menu principal">

                                <ul class="navbar-nav nav-lvl--1">
                                    <li class="nav-item common-nav-item">

                                        <a class="nav-link" href="#">Consultations</a>
                                    </li>
                                    <li class="nav-item is-active common-nav-item">

                                        <a class="nav-link" href="#">Nouveau patient <span class="sr-only">(page courante)</span></a>
                                    </li>
                                    <li class="nav-item common-nav-item">


                                        <button class="nav-link" type="button"
                                                data-toggle="collapse"
                                                data-target="#nav1-nav-collapse-submenu--2"
                                                aria-controls="nav1-nav-collapse-submenu--2"
                                                aria-expanded="false"
                                        >Paramètres
                                        </button>

                                        <div class="collapse nav-collapse" id="nav1-nav-collapse-submenu--2"
                                             data-parent="#menuPrincipal">
                                            <div class="nav-collapse-inner">


                                                <ul class="navbar-nav nav-lvl--2">
                                                    <li class="nav-item is-active common-nav-item">

                                                        <a class="nav-link" href="#">[Active] Label menu <span
                                                                class="sr-only">(page courante)</span></a>
                                                    </li>
                                                    <li class="nav-item common-nav-item">

                                                        <a class="nav-link" href="#">Label menu with long text lorem
                                                            ipsum</a>
                                                    </li>
                                                    <li class="nav-item common-nav-item">

                                                        <a class="nav-link" href="#">Label menu</a>


                                                        <ul class="navbar-nav nav-lvl--3">
                                                            <li class="nav-item common-nav-item">

                                                                <a class="nav-link" href="#">Label menu with long text
                                                                    lorem ipsum</a>
                                                            </li>
                                                            <li class="nav-item is-active common-nav-item">

                                                                <a class="nav-link" href="#">[Active] Label menu <span
                                                                        class="sr-only">(page courante)</span></a>
                                                            </li>
                                                            <li class="nav-item common-nav-item">

                                                                <a class="nav-link" href="#">Label menu</a>
                                                            </li>
                                                        </ul>


                                                    </li>
                                                    <li class="nav-item common-nav-item">


                                                        <span class="nav-title">Label menu sans lien</span>


                                                        <ul class="navbar-nav nav-lvl--3">
                                                            <li class="nav-item common-nav-item">

                                                                <a class="nav-link" href="#">Label menu with long text
                                                                    lorem ipsum</a>
                                                            </li>
                                                            <li class="nav-item is-active common-nav-item">

                                                                <a class="nav-link" href="#">[Active] Label menu <span
                                                                        class="sr-only">(page courante)</span></a>
                                                            </li>
                                                            <li class="nav-item common-nav-item">

                                                                <a class="nav-link" href="#">Label menu</a>
                                                            </li>
                                                        </ul>


                                                    </li>
                                                    <li class="nav-item common-nav-item">

                                                        <a class="nav-link" href="#">Label menu</a>
                                                    </li>
                                                </ul>

                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </nav>

                            <ul class="nav-right">
                                <li class="nav-right-item collapse-wrapper common-nav-item">
                                    <button type="button" class="btn btn--icon-only btn-icon--header"
                                            aria-label="Accessibilité" data-toggle="collapse"
                                            data-target="#collapseAccess" aria-controls="collapseAccess"
                                            aria-expanded="false">
                                        <svg class="svg-icon svg-access" aria-hidden="true" focusable="false">
                                            <use xlink:href="/svg-icons/icon-sprite.svg#access"></use>
                                        </svg>
                                        <span class="title-responsive">Accessibilité</span>
                                    </button>
                                    <div class="collapse nav-collapse nav-collapse--right" id="collapseAccess">
                                        <section aria-labelledby="widget-access-title">
                                            <h2 class="o-widget-access__intro" id="widget-access-title">Options
                                                d'accessibilité</h2>

                                            <div class="o-widget-access">
                                                <div class="form-group form-group-custom-control">
                                                    <fieldset id="contrast-id">
                                                        <legend>Contrastes :</legend>

                                                        <div class="o-widget-access__option">
                                                            <input id="default-c" value="default-c" name="contrast"
                                                                   checked="checked" type="radio" class="sr-only">
                                                            <label class="o-widget-access__label btn btn--ghost btn--primary btn-sm"
                                                                   for="default-c"><span
                                                                    class="sr-only">Contrastes</span> Standards</label>
                                                        </div>
                                                        <div class="o-widget-access__option">
                                                            <input id="high-c" value="high-c" name="contrast"
                                                                   type="radio" class="sr-only">
                                                            <label class="o-widget-access__label btn btn--ghost btn--primary btn-sm"
                                                                   for="high-c"><span class="sr-only">Contrastes</span>
                                                                Renforcés</label>
                                                        </div>
                                                    </fieldset>
                                                </div>


                                            </div>
                                        </section>
                                    </div>
                                </li>
                                <li class="nav-right-item collapse-wrapper common-nav-item">
                                    <button type="button" class="btn btn--icon-only btn-icon--header"
                                            aria-label="Mes messages (3)">
                                        <svg class="svg-icon svg-mail" aria-hidden="true" focusable="false">
                                            <use xlink:href="/svg-icons/icon-sprite.svg#mail"></use>
                                        </svg>
                                        <span class="mail-counter">3</span>
                                        <span class="title-responsive">Mes messages</span>
                                    </button>
                                </li>
                            </ul>

                        </div>


                        <div class="collapse-wrapper common-nav-item">
                            <button type="button" class="btn btn--icon-only btn-icon--header"
                                    aria-label="Menu utilisateur" data-toggle="collapse" data-target="#collapseUser"
                                    aria-controls="collapseUser" aria-expanded="false">
                                <svg class="svg-icon svg-user" aria-hidden="true" focusable="false">
                                    <use xlink:href="/svg-icons/icon-sprite.svg#user"></use>
                                </svg>
                                <span class="sr-only">Menu utilisateur</span>
                            </button>
                            <div class="collapse nav-collapse nav-collapse--right" id="collapseUser">
                                <div class="m-user">
                                    <div class="m-user__icon">
                                        <svg class="svg-icon svg-user" aria-hidden="true" focusable="false">
                                            <use xlink:href="/svg-icons/icon-sprite.svg#user"></use>
                                        </svg>
                                    </div>
                                    <p class="m-user__name">Bernard Morin</p>

                                    <ul class="navbar-nav m-user__nav">
                                        <li class="nav-item">
                                            <a class="nav-link" href="#">Mes informations personnelles</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#">Modifier mon compte</a>
                                        </li>
                                    </ul>

                                    <a href="/logout" class=" btn btn--ghost btn--default btn-xs">Déconnexion</a></div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </header>
	
	  <main class="main" role="main" id="main" tabindex="-1">
        <div class="container">
		<h1>Page d'accueil Utilisateur en possession d'un jeton d'API</h1>
			<p>Application métier de démonstration .... jeton PSC => jeton
				d'API</p>
			<h3>Votre jeton PSC a été échangé contre un jeton d'API </h3>
			<p>Cliquer sur un des boutons suivants pour accéder aux DAMs</p>
			<button class=" btn btn--plain btn--primary" style="display: inline;" onclick="window.location.href='./api'">Lecture myDAMs</button>
			<button class=" btn btn--plain btn--primary" style="display: inline;" onclick="window.location.href='./admin/api/form'">DAMs mode admin</button>
		</div>
			<hr />
			
				<div id=cd_token class=display-token th:if="${token != null}">
	<h3>Caractéristiques du jeton</h3>
				<div class="date-friendly">
				<p>
					date d'expiration: <span th:text="${rawExpDate}"> &#32;&#61;&#62;&#32;</span>
					<span th:text="${#temporals.format(expDate, 'dd-MM-yyyy HH:mm:ss')}" />
				</p>
				<p>
					date d'émission: <span th:text="${rawIatDate}" > &#32;&#61;&#62;&#32; </span>
					<span th:text="${#temporals.format(iatDate, 'dd-MM-yyyy HH:mm:ss')}" />
				</p>
			</div>
		<input type="hidden" id="token" th:value="${token}" />
				<hr />
			<div class="header" id="json-header"></div>
			<div class="header" id="json-body"></div>
			<div class="token-brut">
			<h4>TOKEN</h4>
			<p>
				<span th:text="${token}" />
			</p>
		</div>
			<div class="token-header">
				<h4>HEADER</h4>
				<p>
					<span th:text="${tokenHeader}" />
				</p>

			</div>
			<div class="token-body">
				<h4>BODY</h4>
				<p>
					<span th:text="${tokenBody}" />
				</p>

			</div>
		
		</div>
	
</div> <!-- token non null -->
			<hr/>
			<div class=display-headers>
				<h3>Affichage des headers</h3>
				<tr th:each="row : mapHeaders">
					<table>
						<tr th:each="element : ${mapHeaders}">
							<td th:text="${element.key}"></td>
							<td th:text="${element.value}"></td>
					</table>
					</div>
			</div><!-- div contenainer -->
</main> 
	</div>
</body>
</html>
