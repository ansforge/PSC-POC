<!--

    (c) Copyright 2023, ANS. All rights reserved.

-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Webapp client DAM</title>
<!-- <script type="text/javascript" src="./script/jquery-3.5.1.min.js"></script>-->
<script src="./script/json-viewer.js"></script>
<link rel="stylesheet" href="./style/json-viewer.css" type="text/css">
<!--  <script src="./script/jsonviewer-patial-token.js"></script> -->



   <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" type="text/css" href="./style/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="./style/style.css">
   <!--   <link rel="stylesheet" href="https://use.typekit.net/jjx2ksb.css">-->
    <link rel="stylesheet" href="./style/style-ans.css" type="text/css">
    <link rel="icon" type="image/x-icon" href="./img/favicon.ico">
     
</head>
<body>
<div class="body-wrapper">
    <header class="header header-principal" role="banner">
        <div class="header-principal__inner">
            <div class="header-principal-left">
                <div class="logos">
                    <div class="logo logo--0">
                        <a href="https://solidarites-sante.gouv.fr/">

                            <img src="./img/logo-ministere.svg" alt="Ministère de la Santé et de la Prévention"
                                 width="107" height="62">

                        </a>
                    </div>
                    <div class="logo logo--1">
                        <a href="https://esante.gouv.fr/">

                            <img src="./img/logo-ANS.svg" alt="Accueil Design System ANS" width="166" height="50">

                        </a>
                    </div>
                </div>
                <p class="header__title">Webapp métier de démonstration: client DAMs avec échange de jeton</p>
            </div>
            <div class="header-principal-right">
                <div class="header-principal__nav">


                    <div class="navbar navbar-expand-xl navbar-light" tabindex="-1" id="menuPrincipalTarget">

                        <div class="collapse-wrapper common-nav-item">
                            <button type="button" class="btn btn--icon-only btn-icon--header"
                                    aria-label="Menu utilisateur" data-toggle="collapse" data-target="#collapseUser"
                                    aria-controls="collapseUser" aria-expanded="false">
                                <svg class="svg-icon svg-user" aria-hidden="true" focusable="false">
                                    <use xlink:href="./svg-icons/icon-sprite.svg#user"></use>
                                </svg>
                                <span class="sr-only">Menu utilisateur</span>
                            </button>
                            <div class="collapse nav-collapse nav-collapse--right" id="collapseUser">
                                <div class="m-user">
                                    <div class="m-user__icon">
                                        <svg class="svg-icon svg-user" aria-hidden="true" focusable="false">
                                            <use xlink:href="./svg-icons/icon-sprite.svg#user"></use>
                                        </svg>
                                    </div>
                                    <p class="m-user__name">${user}</p>

                                    <ul class="navbar-nav m-user__nav">
                                        <li class="nav-item">
                                            <a class="nav-link" href="#">Mes informations personnelles</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#">Modifier mon compte</a>
                                        </li>
                                    </ul>

                                    <a href="./logout" class=" btn btn--ghost btn--default btn-xs">Déconnexion</a></div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </header>

    
    
     <main class="main" role="main" id="main" tabindex="-1">
        <div class="container">
	<h1>PAGE d'accueil Utilisateur connecté avec PSC</h1>
	<p>Application métier de démonstration ....</p>

	<h3>Vous êtes authentifié avec un jeton PSC. </h3>
	<p>Pour accéder à vos DAMs, le relaying party fera une demande d'échange de jeton (PSC-> jeton d'API) </p>
	<!--  <button class=" btn btn--plain btn--primary" onclick="window.location.href='./view'"></button>-->
	<button class=" btn btn--plain btn--primary" style="display: inline;" onclick="window.location.href='./view'">Affichage myDAMs</button>
	<hr />

	<div>
	      <p id=warning  style="color: #ff6d91; background:#dbe0ef; border-top:2px solid #aeb8de; border-bottom:2px solid #aeb8de; padding:1em 1em 1em 5em">
	      Les informations ci-dessous sont remontées et affichées dans le navigateur uniquement à titre de démonstration. En production, elles ne doivent pas sortir pas du proxy ('Relying Party') </p>
	</div>	
	
	<!-- affichage jeton -->
				<hr />
	<button id=btnDetails class="btn btn--plain btn--primary" onclick="details()">Voir des détails techniques</button>
<!-- 	<div id=details style=display:none>  --> 
       <div id=details style=visibility:visible> 
	<p> c est visible !!!!!!!!!!!!!!!!!  </p>
	<div id=cd_token class=display-token th:if="${tokenBody != null}">
	<h3>Caractéristiques du jeton PSC</h3>
	<div class="date-friendly">
			<p>
				date d'expiration:  <span th:text="${rawExpDate}"> &#32;&#61;&#62;&#32;</span>
					<span th:text="${#temporals.format(expDate, 'dd-MM-yyyy HH:mm:ss')}" />
			  </p>
			<p> 
				date d'émission: <span th:text="${rawIatDate}" > &#32;&#61;&#62;&#32; </span>
					<span th:text="${#temporals.format(iatDate, 'dd-MM-yyyy HH:mm:ss')}" />
			</p>
		</div>
		<input type="hidden" id="header" th:value="${tokenHeader}" />
		<input type="hidden" id="body" th:value="${tokenBody}" />
				<hr />
			<div class="header" id="json-header"></div>
			<div class="header" id="json-body"></div>
	</div> <!-- div token exist -->
	</div> <!-- voir les détails -->
	</div> <!-- div contenainer -->
	<script type="text/javascript" src="./script/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="./script/vendor.js"></script>
<script type="text/javascript" src="./script/app.js"></script>
	</main>
	</div>
</body>
</html>
