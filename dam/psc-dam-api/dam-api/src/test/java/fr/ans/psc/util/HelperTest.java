package fr.ans.psc.util;

import static org.junit.jupiter.api.Assertions.assertEquals;

import java.io.UnsupportedEncodingException;
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;

import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.JsonMappingException;

import fr.ans.psc.api.client.dam.reader.model.SimpleDam;
import fr.ans.psc.dam.model.UserActivities;
import fr.ans.psc.dam.util.Helper;
import lombok.extern.slf4j.Slf4j;

@Slf4j
public class HelperTest {

	private static String  XUSERINFO = "eyJTZWN0ZXVyX0FjdGl2aXRlIjoiU0EwN14xLjIuMjUwLjEuNzEuNC4yLjQiLCJzdWIiOiJmOjU1MGRjMWM4LWQ5N2ItNGIxZS1hYzhjLThlYjQ0NzFjZjlkZDo4OTk3MDA0Mjc4ODUiLCJTdWJqZWN0T3JnYW5pemF0aW9uIjoiQ0FCSU5FVCBNIERPQzAwNDI3ODgiLCJNb2RlX0FjY2VzX1JhaXNvbiI6IiIsInByZWZlcnJlZF91c2VybmFtZSI6Ijg5OTcwMDQyNzg4NSIsImdpdmVuX25hbWUiOiJLSVQiLCJBY2Nlc19SZWd1bGF0aW9uX01lZGljYWxlIjoiRkFVWCIsIlVJVFZlcnNpb24iOiIxLjAiLCJhdXRoTW9kZSI6IkNBUkQiLCJQYWxpZXJfQXV0aGVudGlmaWNhdGlvbiI6IkFQUFBSSVAzXjEuMi4yNTAuMS4yMTMuMS41LjEuMS4xIiwiU3ViamVjdFJlZlBybyI6eyJjb2RlQ2l2aWxpdGUiOiJNIiwiZXhlcmNpY2VzIjpbeyJjb2RlUHJvZmVzc2lvbiI6IjEwIiwiY29kZUNhdGVnb3JpZVByb2Zlc3Npb25uZWxsZSI6IkMiLCJjb2RlQ2l2aWxpdGVEZXhlcmNpY2UiOiJEUiIsIm5vbURleGVyY2ljZSI6IkRPQzAwNDI3ODgiLCJwcmVub21EZXhlcmNpY2UiOiJLSVQiLCJjb2RlVHlwZVNhdm9pckZhaXJlIjoiUyIsImNvZGVTYXZvaXJGYWlyZSI6IlNNMjYiLCJhY3Rpdml0aWVzIjpbeyJjb2RlTW9kZUV4ZXJjaWNlIjoiTCIsImNvZGVTZWN0ZXVyRGFjdGl2aXRlIjoiU0EwNyIsImNvZGVTZWN0aW9uUGhhcm1hY2llbiI6IiIsImNvZGVSb2xlIjoiIiwiY29kZUdlbnJlQWN0aXZpdGUiOiIiLCJudW1lcm9TaXJldFNpdGUiOiIiLCJudW1lcm9TaXJlblNpdGUiOiIiLCJudW1lcm9GaW5lc3NTaXRlIjoiIiwibnVtZXJvRmluZXNzZXRhYmxpc3NlbWVudEp1cmlkaXF1ZSI6IiIsImlkZW50aWZpYW50VGVjaG5pcXVlRGVMYVN0cnVjdHVyZSI6IlIxMDI2NzEiLCJyYWlzb25Tb2NpYWxlU2l0ZSI6IkNBQklORVQgTSBET0MwMDQyNzg4IiwiZW5zZWlnbmVDb21tZXJjaWFsZVNpdGUiOiIiLCJjb21wbGVtZW50RGVzdGluYXRhaXJlIjoiQ0FCSU5FVCBNIERPQyIsImNvbXBsZW1lbnRQb2ludEdlb2dyYXBoaXF1ZSI6IiIsIm51bWVyb1ZvaWUiOiIxIiwiaW5kaWNlUmVwZXRpdGlvblZvaWUiOiIiLCJjb2RlVHlwZURlVm9pZSI6IlIiLCJsaWJlbGxlVm9pZSI6Ik5PSVIiLCJtZW50aW9uRGlzdHJpYnV0aW9uIjoiIiwiYnVyZWF1Q2VkZXgiOiI3NTAwOSBQQVJJUyIsImNvZGVQb3N0YWwiOiI3NTAwOSIsImNvZGVDb21tdW5lIjoiIiwiY29kZVBheXMiOiI5OTAwMCIsInRlbGVwaG9uZSI6IiIsInRlbGVwaG9uZTIiOiIiLCJ0ZWxlY29waWUiOiIiLCJhZHJlc3NlRU1haWwiOiIiLCJjb2RlRGVwYXJ0ZW1lbnQiOiIiLCJhbmNpZW5JZGVudGlmaWFudERlTGFTdHJ1Y3R1cmUiOiI0OTk3MDA0Mjc4ODUwMDYiLCJhdXRvcml0ZURlbnJlZ2lzdHJlbWVudCI6IkNOT00vQ05PTS9DTk9NIn0seyJjb2RlTW9kZUV4ZXJjaWNlIjoiUyIsImNvZGVTZWN0ZXVyRGFjdGl2aXRlIjoiU0EwMSIsImNvZGVTZWN0aW9uUGhhcm1hY2llbiI6IiIsImNvZGVSb2xlIjoiIiwiY29kZUdlbnJlQWN0aXZpdGUiOiIiLCJudW1lcm9TaXJldFNpdGUiOiIiLCJudW1lcm9TaXJlblNpdGUiOiIiLCJudW1lcm9GaW5lc3NTaXRlIjoiMEIwMTkzNDg4IiwibnVtZXJvRmluZXNzZXRhYmxpc3NlbWVudEp1cmlkaXF1ZSI6IjFCMDA2NDE2NiIsImlkZW50aWZpYW50VGVjaG5pcXVlRGVMYVN0cnVjdHVyZSI6IkYwQjAxOTM0ODgiLCJyYWlzb25Tb2NpYWxlU2l0ZSI6IkhPUElUQUwgR0VORVJJUVVFICBGSU4gVkFSSSIsImVuc2VpZ25lQ29tbWVyY2lhbGVTaXRlIjoiIiwiY29tcGxlbWVudERlc3RpbmF0YWlyZSI6IiIsImNvbXBsZW1lbnRQb2ludEdlb2dyYXBoaXF1ZSI6IiIsIm51bWVyb1ZvaWUiOiIxMCIsImluZGljZVJlcGV0aXRpb25Wb2llIjoiIiwiY29kZVR5cGVEZVZvaWUiOiJSIiwibGliZWxsZVZvaWUiOiJERSBQQVJJUyIsIm1lbnRpb25EaXN0cmlidXRpb24iOiIiLCJidXJlYXVDZWRleCI6IlBBUklTIiwiY29kZVBvc3RhbCI6Ijc1MDA5IiwiY29kZUNvbW11bmUiOiIiLCJjb2RlUGF5cyI6IiIsInRlbGVwaG9uZSI6IiIsInRlbGVwaG9uZTIiOiIiLCJ0ZWxlY29waWUiOiIiLCJhZHJlc3NlRU1haWwiOiIiLCJjb2RlRGVwYXJ0ZW1lbnQiOiIiLCJhbmNpZW5JZGVudGlmaWFudERlTGFTdHJ1Y3R1cmUiOiIxMEIwMTkzNDg4IiwiYXV0b3JpdGVEZW5yZWdpc3RyZW1lbnQiOiJDTk9NL0NOT00vQVJTIn1dfV19LCJTdWJqZWN0T3JnYW5pemF0aW9uSUQiOiJSMTAyNjcxIiwiU3ViamVjdFJvbGUiOlsiMTBeMS4yLjI1MC4xLjIxMy4xLjEuNS41Il0sIlBTSV9Mb2NhbGUiOiIxLjIuMjUwLjEuMjEzLjEuMy4xLjEiLCJvdGhlcklkcyI6W3siaWRlbnRpZmlhbnQiOiI4OTk3MDA0Mjc4ODUiLCJvcmlnaW5lIjoiUlBQUyIsInF1YWxpdGUiOjF9XSwiU3ViamVjdE5hbWVJRCI6Ijg5OTcwMDQyNzg4NSIsImZhbWlseV9uYW1lIjoiRE9DMDA0Mjc4OCJ9";
	//Userinfo avec 2 activités
	private static String USERINFO = "{\"Secteur_Activite\":\"SA07^1.2.250.1.71.4.2.4\",\"sub\":\"f:550dc1c8-d97b-4b1e-ac8c-8eb4471cf9dd:899700427885\",\"SubjectOrganization\":\"CABINET M DOC0042788\",\"Mode_Acces_Raison\":\"\",\"preferred_username\":\"899700427885\",\"given_name\":\"KIT\",\"Acces_Regulation_Medicale\":\"FAUX\",\"UITVersion\":\"1.0\",\"authMode\":\"CARD\",\"Palier_Authentification\":\"APPPRIP3^1.2.250.1.213.1.5.1.1.1\",\"SubjectRefPro\":{\"codeCivilite\":\"M\",\"exercices\":[{\"codeProfession\":\"10\",\"codeCategorieProfessionnelle\":\"C\",\"codeCiviliteDexercice\":\"DR\",\"nomDexercice\":\"DOC0042788\",\"prenomDexercice\":\"KIT\",\"codeTypeSavoirFaire\":\"S\",\"codeSavoirFaire\":\"SM26\",\"activities\":[{\"codeModeExercice\":\"L\",\"codeSecteurDactivite\":\"SA07\",\"codeSectionPharmacien\":\"\",\"codeRole\":\"\",\"codeGenreActivite\":\"\",\"numeroSiretSite\":\"\",\"numeroSirenSite\":\"\",\"numeroFinessSite\":\"\",\"numeroFinessetablissementJuridique\":\"\",\"identifiantTechniqueDeLaStructure\":\"R102671\",\"raisonSocialeSite\":\"CABINET M DOC0042788\",\"enseigneCommercialeSite\":\"\",\"complementDestinataire\":\"CABINET M DOC\",\"complementPointGeographique\":\"\",\"numeroVoie\":\"1\",\"indiceRepetitionVoie\":\"\",\"codeTypeDeVoie\":\"R\",\"libelleVoie\":\"NOIR\",\"mentionDistribution\":\"\",\"bureauCedex\":\"75009 PARIS\",\"codePostal\":\"75009\",\"codeCommune\":\"\",\"codePays\":\"99000\",\"telephone\":\"\",\"telephone2\":\"\",\"telecopie\":\"\",\"adresseEMail\":\"\",\"codeDepartement\":\"\",\"ancienIdentifiantDeLaStructure\":\"499700427885006\",\"autoriteDenregistrement\":\"CNOM/CNOM/CNOM\"},{\"codeModeExercice\":\"S\",\"codeSecteurDactivite\":\"SA01\",\"codeSectionPharmacien\":\"\",\"codeRole\":\"\",\"codeGenreActivite\":\"\",\"numeroSiretSite\":\"\",\"numeroSirenSite\":\"\",\"numeroFinessSite\":\"0B0193488\",\"numeroFinessetablissementJuridique\":\"1B0064166\",\"identifiantTechniqueDeLaStructure\":\"F0B0193488\",\"raisonSocialeSite\":\"HOPITAL GENERIQUE  FIN VARI\",\"enseigneCommercialeSite\":\"\",\"complementDestinataire\":\"\",\"complementPointGeographique\":\"\",\"numeroVoie\":\"10\",\"indiceRepetitionVoie\":\"\",\"codeTypeDeVoie\":\"R\",\"libelleVoie\":\"DE PARIS\",\"mentionDistribution\":\"\",\"bureauCedex\":\"PARIS\",\"codePostal\":\"75009\",\"codeCommune\":\"\",\"codePays\":\"\",\"telephone\":\"\",\"telephone2\":\"\",\"telecopie\":\"\",\"adresseEMail\":\"\",\"codeDepartement\":\"\",\"ancienIdentifiantDeLaStructure\":\"10B0193488\",\"autoriteDenregistrement\":\"CNOM/CNOM/ARS\"}]}]},\"SubjectOrganizationID\":\"R102671\",\"SubjectRole\":[\"10^1.2.250.1.213.1.1.5.5\"],\"PSI_Locale\":\"1.2.250.1.213.1.3.1.1\",\"otherIds\":[{\"identifiant\":\"899700427885\",\"origine\":\"RPPS\",\"qualite\":1}],\"SubjectNameID\":\"899700427885\",\"family_name\":\"DOC0042788\"}";
	private static String USERINFO_CHAMPS_SUPPLEMENTAIRE = "{\"Secteur_Activite\":\"SA07^1.2.250.1.71.4.2.4\",\"sub\":\"f:550dc1c8-d97b-4b1e-ac8c-8eb4471cf9dd:899700427885\",\"SubjectOrganization\":\"CABINET M DOC0042788\",\"Mode_Acces_Raison\":\"\",\"preferred_username\":\"899700427885\",\"given_name\":\"KIT\",\"Acces_Regulation_Medicale\":\"FAUX\",\"ChampsAjoute\":\"champAjoute\",\"UITVersion\":\"1.0\",\"authMode\":\"CARD\",\"Palier_Authentification\":\"APPPRIP3^1.2.250.1.213.1.5.1.1.1\",\"SubjectRefPro\":{\"codeCivilite\":\"M\",\"exercices\":[{\"codeProfession\":\"10\",\"codeCategorieProfessionnelle\":\"C\",\"codeCiviliteDexercice\":\"DR\",\"nomDexercice\":\"DOC0042788\",\"prenomDexercice\":\"KIT\",\"codeTypeSavoirFaire\":\"S\",\"codeSavoirFaire\":\"SM26\",\"activities\":[{\"codeModeExercice\":\"L\",\"codeSecteurDactivite\":\"SA07\",\"codeSectionPharmacien\":\"\",\"codeRole\":\"\",\"codeGenreActivite\":\"\",\"numeroSiretSite\":\"\",\"numeroSirenSite\":\"\",\"numeroFinessSite\":\"\",\"numeroFinessetablissementJuridique\":\"\",\"identifiantTechniqueDeLaStructure\":\"R102671\",\"raisonSocialeSite\":\"CABINET M DOC0042788\",\"enseigneCommercialeSite\":\"\",\"complementDestinataire\":\"CABINET M DOC\",\"complementPointGeographique\":\"\",\"numeroVoie\":\"1\",\"indiceRepetitionVoie\":\"\",\"codeTypeDeVoie\":\"R\",\"libelleVoie\":\"NOIR\",\"mentionDistribution\":\"\",\"bureauCedex\":\"75009 PARIS\",\"codePostal\":\"75009\",\"codeCommune\":\"\",\"codePays\":\"99000\",\"telephone\":\"\",\"telephone2\":\"\",\"telecopie\":\"\",\"adresseEMail\":\"\",\"codeDepartement\":\"\",\"ancienIdentifiantDeLaStructure\":\"499700427885006\",\"autoriteDenregistrement\":\"CNOM/CNOM/CNOM\"},{\"codeModeExercice\":\"S\",\"codeSecteurDactivite\":\"SA01\",\"codeSectionPharmacien\":\"\",\"codeRole\":\"\",\"codeGenreActivite\":\"\",\"numeroSiretSite\":\"\",\"numeroSirenSite\":\"\",\"numeroFinessSite\":\"0B0193488\",\"numeroFinessetablissementJuridique\":\"1B0064166\",\"identifiantTechniqueDeLaStructure\":\"F0B0193488\",\"raisonSocialeSite\":\"HOPITAL GENERIQUE  FIN VARI\",\"enseigneCommercialeSite\":\"\",\"complementDestinataire\":\"\",\"complementPointGeographique\":\"\",\"numeroVoie\":\"10\",\"indiceRepetitionVoie\":\"\",\"codeTypeDeVoie\":\"R\",\"libelleVoie\":\"DE PARIS\",\"mentionDistribution\":\"\",\"bureauCedex\":\"PARIS\",\"codePostal\":\"75009\",\"codeCommune\":\"\",\"codePays\":\"\",\"telephone\":\"\",\"telephone2\":\"\",\"telecopie\":\"\",\"adresseEMail\":\"\",\"codeDepartement\":\"\",\"ancienIdentifiantDeLaStructure\":\"10B0193488\",\"autoriteDenregistrement\":\"CNOM/CNOM/ARS\"}]}]},\"SubjectOrganizationID\":\"R102671\",\"SubjectRole\":[\"10^1.2.250.1.213.1.1.5.5\"],\"PSI_Locale\":\"1.2.250.1.213.1.3.1.1\",\"otherIds\":[{\"identifiant\":\"899700427885\",\"origine\":\"RPPS\",\"qualite\":1}],\"SubjectNameID\":\"899700427885\",\"family_name\":\"DOC0042788\"}";
	
	//userinfo avec 5 activités
	//{"Secteur_Activite":"SA07^1.2.250.1.71.4.2.4","sub":"f:550dc1c8-d97b-4b1e-ac8c-8eb4471cf9dd:ANS20210107161422","email_verified":false,"SubjectOrganization":"CAB MED BIS TOUBIB0023550","Mode_Acces_Raison":"","preferred_username":"ANS20210107161422","given_name":"Paul","Acces_Regulation_Medicale":"FAUX","UITVersion":"1.0","Palier_Authentification":"APPPRIP3^1.2.250.1.213.1.5.1.1.1","SubjectRefPro":{"codeCivilite":"M","exercices":[{"codeProfession":"10","codeCategorieProfessionnelle":"C","codeCiviliteDexercice":"M","nomDexercice":"Docteur OIDC","prenomDexercice":"Paul","codeTypeSavoirFaire":"S","codeSavoirFaire":"SM54","activities":[{"codeModeExercice":"L","codeSecteurDactivite":"SA07","codeSectionPharmacien":"","codeRole":"","codeGenreActivite":"GENR01","numeroSiretSite":"","numeroSirenSite":"","numeroFinessSite":"","numeroFinessetablissementJuridique":"","identifiantTechniqueDeLaStructure":"","raisonSocialeSite":"CAB MED BIS TOUBIB0023550","enseigneCommercialeSite":"","complementDestinataire":"","complementPointGeographique":"","numeroVoie":"","indiceRepetitionVoie":"","codeTypeDeVoie":"R","libelleVoie":"PARIS","mentionDistribution":"","bureauCedex":"","codePostal":"75009","codeCommune":"75109","codePays":"","telephone":"","telephone2":"","telecopie":"","adresseEMail":"","codeDepartement":"75","ancienIdentifiantDeLaStructure":"","autoriteDenregistrement":""},{"codeModeExercice":"L","codeSecteurDactivite":"SA07","codeSectionPharmacien":"","codeRole":"","codeGenreActivite":"GENR01","numeroSiretSite":"","numeroSirenSite":"","numeroFinessSite":"","numeroFinessetablissementJuridique":"","identifiantTechniqueDeLaStructure":"","raisonSocialeSite":"CABINET MEDICAL0023550","enseigneCommercialeSite":"","complementDestinataire":"","complementPointGeographique":"","numeroVoie":"2","indiceRepetitionVoie":"","codeTypeDeVoie":"R","libelleVoie":"LIBERTA","mentionDistribution":"","bureauCedex":"","codePostal":"75009","codeCommune":"75109","codePays":"","telephone":"","telephone2":"","telecopie":"","adresseEMail":"","codeDepartement":"75","ancienIdentifiantDeLaStructure":"","autoriteDenregistrement":""},{"codeModeExercice":"S","codeSecteurDactivite":"SA01","codeSectionPharmacien":"","codeRole":"","codeGenreActivite":"GENR01","numeroSiretSite":"","numeroSirenSite":"","numeroFinessSite":"","numeroFinessetablissementJuridique":"","identifiantTechniqueDeLaStructure":"","raisonSocialeSite":"HOPITAL GENERIQUE","enseigneCommercialeSite":"","complementDestinataire":"","complementPointGeographique":"","numeroVoie":"20","indiceRepetitionVoie":"","codeTypeDeVoie":"R","libelleVoie":"DE PARIS","mentionDistribution":"","bureauCedex":"","codePostal":"75020","codeCommune":"75120","codePays":"","telephone":"","telephone2":"","telecopie":"","adresseEMail":"","codeDepartement":"75","ancienIdentifiantDeLaStructure":"","autoriteDenregistrement":""},{"codeModeExercice":"S","codeSecteurDactivite":"SA43","codeSectionPharmacien":"","codeRole":"","codeGenreActivite":"GENR01","numeroSiretSite":"00000000016972","numeroSirenSite":"000000000","numeroFinessSite":"","numeroFinessetablissementJuridique":"","identifiantTechniqueDeLaStructure":"","raisonSocialeSite":"CONSEIL DES ORDRES","enseigneCommercialeSite":"","complementDestinataire":"","complementPointGeographique":"","numeroVoie":"28","indiceRepetitionVoie":"","codeTypeDeVoie":"R","libelleVoie":"DES INVALIDES","mentionDistribution":"","bureauCedex":"","codePostal":"75009","codeCommune":"75109","codePays":"","telephone":"","telephone2":"","telecopie":"","adresseEMail":"","codeDepartement":"75","ancienIdentifiantDeLaStructure":"","autoriteDenregistrement":""},{"codeModeExercice":"S","codeSecteurDactivite":"SA43","codeSectionPharmacien":"","codeRole":"","codeGenreActivite":"GENR01","numeroSiretSite":"00000000079608","numeroSirenSite":"000000000","numeroFinessSite":"","numeroFinessetablissementJuridique":"","identifiantTechniqueDeLaStructure":"","raisonSocialeSite":"ORGANISME ND7960","enseigneCommercialeSite":"","complementDestinataire":"","complementPointGeographique":"","numeroVoie":"2","indiceRepetitionVoie":"","codeTypeDeVoie":"R","libelleVoie":"MOULIN VERT","mentionDistribution":"","bureauCedex":"","codePostal":"75009","codeCommune":"75109","codePays":"","telephone":"","telephone2":"","telecopie":"","adresseEMail":"","codeDepartement":"75","ancienIdentifiantDeLaStructure":"","autoriteDenregistrement":""}]}]},"SubjectOrganizationID":"","SubjectRole":["10^1.2.250.1.213.1.1.5.5"],"PSI_Locale":"1.2.250.1.213.1.3.1.1","otherIds":[{"identifiant":"ANS20210107161422","origine":"EDIT","qualite":1}],"SubjectNameID":"ANS20210107161422","family_name":"NOM"}
	private static String SINGLE_DAM = "{\"nationalId\":\"899700245667\",\"dams\":[{\"identifiantLieuDeTravail\":\"99700245667008\",\"typeIdentifiant\":\"Id Cabinet RPPS / N° de registre\",\"codeTypeIdentifiant\":\"6\",\"raisonSociale\":\"CABINET M DOC0024566\",\"modeExercice\":\"Libéral\",\"codeModeExercice\":\"0\",\"numActivite\":\"2102887019\",\"numAssuranceMaladie\":\"001055664\",\"dateDebutValidite\":\"26-06-2020\",\"dateFinValidite\":\"26-06-2023\",\"specialite\":\"Médecine générale\",\"codeSpecialite\":\"01\",\"conventionnement\":\"Conventionné\",\"codeConventionnel\":\"1\",\"indicateurFacturation\":\"Libellé indicateur facturation 2\",\"codeIndicateurFacturation\":\"2\",\"zoneIK\":\"Libellé Code Indemnités kilométriques 1\",\"codeZoneIK\":\"1\",\"zoneTarifaire\":\"Zone B\",\"codeZoneTarifaire\":\"24\",\"agrement1\":\"code non trouvé dans la nomeclature\",\"codeAgrement1\":\"00\",\"agrement2\":\"code non trouvé dans la nomeclature\",\"codeAgrement2\":\"00\",\"agrement3\":\"code non trouvé dans la nomeclature\",\"codeAgrement3\":\"00\",\"habilitationFse\":\"001\",\"habilitationLot\":\"001\"}]}";
	
	
	@Test
	@DisplayName("decodeBase64 X-UserInfo header.")
	public void decodeTest() throws UnsupportedEncodingException, IllegalArgumentException {
		
		String value = Helper.decodeBase64toString(XUSERINFO);
		assertEquals(USERINFO, value);
	}
		
	
	@Test
	@DisplayName("Extraction des activités du UserInfo")
	public void helperExtractionActivitesTest() throws JsonMappingException, JsonProcessingException {
		
		String jsonUserInfo =  USERINFO;
		
		UserActivities user = Helper.getUserActivities(jsonUserInfo);
		assertEquals(user.getIdNat(), "899700427885");
		assertEquals(user.getActivites().size(), 2);
		assertEquals(user.getActivites().get(0).getIdentifiantTechniqueDeLaStructure(), "R102671");
		assertEquals(user.getActivites().get(0).getCodeModeExercice(), "L");
		assertEquals(user.getActivites().get(0).getRaisonSocialeSite(), "CABINET M DOC0042788");
		assertEquals(user.getActivites().get(1).getIdentifiantTechniqueDeLaStructure(), "F0B0193488");
		assertEquals(user.getActivites().get(1).getCodeModeExercice(), "S");
		assertEquals(user.getActivites().get(1).getRaisonSocialeSite(), "HOPITAL GENERIQUE  FIN VARI");			
		}
	
	@Test
	@DisplayName("tmp bug date")
	public void dateTest()  {
//		SimpleDam dam = new SimpleDam();
//		dam.setDateFinValidite("26-06-2023");
		DateTimeFormatter formatter = DateTimeFormatter.ofPattern("dd-MM-yyyy");
		LocalDate date = LocalDate.parse("26-06-2023", formatter);
		System.out.println(date);
		LocalDate date2 = LocalDate.now();
		LocalDate date3 = LocalDate.of(2020, 1, 8);
		LocalDate date4 = LocalDate.of(2023, 6, 27);
		System.out.println("1" + date2.isAfter(date4));
		System.out.println("2" + date2.isAfter(date3));
		
		//LocalDate date = LocalDate.of(2020, 1, 8); => yyyy, MM, dd
	
	}
}

